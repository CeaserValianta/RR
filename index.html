<!DOCTYPE html> 

<html>
<head>
<title>World Rugby World Rankings calculator</title>
<meta name="viewport" content="width=480"/>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="//ajax.aspnetcdn.com/ajax/knockout/knockout-3.3.0.js"></script>
<link href="//fonts.googleapis.com/css?family=Roboto:400,500" rel="stylesheet"> 
<link href="styles/wr-calc.css?v=0.8" type="text/css" rel="stylesheet">
<script src="scripts/models/ViewModel.js?v=0.8" type="text/javascript" ></script>
<script src="scripts/models/RankingViewModel.js?v=0.8" type="text/javascript" ></script>
<script src="scripts/models/FixtureViewModel.js?v=0.8" type="text/javascript" ></script>
</head>
<body>
    <div id="leftright">
        <div id="left">
            <div class="header">
                <h3>Rankings</h3>
            </div>
            <div id="which" data-bind="if: shownRankings">
                <label data-bind="css: $data.shownRankings() === 'original' ? 'sel' : ''">
                    <input type="radio" name="rankings" value="original" data-bind="checked: shownRankings">
                    <span data-bind="text: originalDate" />
                </label>
                <label data-bind="css: $data.shownRankings() === 'calculated' ? 'sel' : ''">
                    <input type="radio" name="rankings" value="calculated" data-bind="checked: shownRankings">
                    CALCULATED
                </label>
            </div>

            <div id="rankings">
                <!-- ko ifnot: shownRankings -->
                <h4>
                    Loading <a href="http://www.worldrugby.org/rankings/mru?lang=en">rankings</a>
                </h4>
                <!-- /ko -->

                <div data-bind="if: ($data.shownRankings() === 'original' && $data.baseRankings())">
                    <table>
                        <thead>
                            <tr><th class="pos">#</th><th /><th class="name">Team</th><th colspan=2>Points</th></tr>
                        </thead>
                        <tbody data-bind="foreach: baseRankings">
                            <tr data-bind="css: changeCls">
                                <td class="pos" data-bind="text: pos"></td>
                                <td class="posDiff" data-bind="html: previousPosDisplay"></td>
                                <td class="name" data-bind="text: team.displayName, attr: { title: team.displayTitle }"></td>
                                <td data-bind="text: ptsDisplay"></td>
                                <td class="ptsDiff" data-bind="html: ptsDiffDisplay"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div data-bind="if: ($data.shownRankings() === 'calculated' && $data.projectedRankings())">
                    <table>
                        <thead>
                            <tr><th class="pos">#</th><th /><th class="name">Team</th><th colspan=2>Points</th></tr>
                        </thead>
                        <tbody data-bind="foreach: projectedRankings">
                            <tr data-bind="css: changeCls">
                                <td class="pos" data-bind="text: pos"></td>
                                <td class="posDiff" data-bind="html: previousPosDisplay"></td>
                                <td class="name" data-bind="text: team.displayName, attr: { title: team.displayTitle }"></td>
                                <td data-bind="text: ptsDisplay"></td>
                                <td class="ptsDiff" data-bind="html: ptsDiffDisplay"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div id="right">
            <div class="header">
                <h3>Fixtures</h3>
            </div>
            <div id="fixtures">
                <table>
                    <thead>
                        <tr><th>Home team</th><th colspan='2'>Score</th><th>Away team</th><th title='No Home Advantage'>NHA</th><th title='Is Rugby World Cup match'>RWC</th></tr>
                    </thead>
                    <tbody data-bind="foreach: fixtures">
                        <tr data-bind="if: $index() > 0" class="spacer" aria-hidden=true><!-- only way to get whitespace between rows? --></tr>
                        <tr>
                            <td><select data-bind="options: $parent.teams, optionsText: 'displayName', optionsValue: 'id', value: homeId, optionsCaption: 'Home...'"></select></td>
                            <td><input type="number" min="0" data-bind="value: homeScore" /></td>
                            <td><input type="number" min="0" data-bind="value: awayScore" /></td>
                            <td><select data-bind="options: $parent.teams, optionsText: 'displayName', optionsValue: 'id', value: awayId, optionsCaption: 'Away...'"></select></td>
                            <td><input type="checkbox" data-bind="checked: noHome" /></td>
                            <td><input type="checkbox" data-bind="checked: isRwc" /></td>
                            <td><button data-bind="click: function () { $parent.fixtures.remove($data); }">x</button></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div id="addrow">
                <button onclick='addFixture();'></button>
            </div>
        </div>
    </div>
    <div id="footer">
        <span class="secondaryText">
            Rankings and ranking algorithm are the property of <a href="http://www.worldrugby.org/rankings/mru?lang=en">World Rugby</a>.
            See <a href="https://github.com/rawling/wr-calc/">GitHub</a> for source, contributors and license.
        </span>
    </div>
    <script src="scripts/wr-calc.js?v=0.8" type="text/javascript" ></script>
</body>
</html>